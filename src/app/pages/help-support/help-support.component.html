
<mat-card *ngIf="success" class="mb-3">
    <mat-icon color="primary">check_circle</mat-icon>
    Your support ticket has been submitted successfully! Our team will get back to you soon.
  </mat-card>
  
<div class="container"> 
  <h2>Help & Support</h2>
  <!-- Quick Help Section -->
<section class="help-support">
  <mat-card>
    <h3 class="section-title">How can we help you today?</h3>
    <mat-divider></mat-divider>

    <!-- Top quick links (cards) -->
    <div class="quick-help">
      <mat-card class="quick-card" *ngFor="let item of [
          { icon: 'article', title: 'Documentation', desc: 'Access user guides and documentation', link: '#' },
          { icon: 'live_help', title: 'FAQs', desc: 'Browse frequently asked questions', link: '/faq' },
          { icon: 'chat', title: 'Live Chat', desc: 'Chat with our support team', link: '#' },
          { icon: 'contact_support', title: 'Support Ticket', desc: 'Submit a support request', link: '#support-form' }
        ]">
        <mat-card-content>
          <mat-icon class="card-icon" color="primary">{{ item.icon }}</mat-icon>
          <h4>{{ item.title }}</h4>
          <p>{{ item.desc }}</p>
        </mat-card-content>
        <mat-card-actions align="end">
          <a [href]="item.link">
            <button mat-button color="primary">Go</button>
          </a>
        </mat-card-actions>
      </mat-card>
    </div>
  </mat-card>

  <!-- NEW: Middle Row Flex Wrap -->
  <div class="middle-row">
    <!-- FAQ -->
    <div class="faq-container">
      <mat-card>
        <h3><mat-icon color="primary">help</mat-icon> Frequently Asked Questions</h3>
        <mat-divider></mat-divider>
        <mat-accordion>
          <mat-expansion-panel *ngFor="let faq of faqs">
            <mat-expansion-panel-header>
              {{ faq.question }}
            </mat-expansion-panel-header>
            <p>{{ faq.answer }}</p>
          </mat-expansion-panel>
        </mat-accordion>
        <div style="text-align: center; margin-top: 1rem;">
          <a routerLink="/faq">
            <button mat-stroked-button color="primary">View All FAQs</button>
          </a>
        </div>
      </mat-card>
    </div>

    <!-- Contact Info -->
    <div class="contact-container">
      <mat-card>
        <h3><mat-icon color="primary">phone</mat-icon> Contact Information</h3>
        <mat-divider></mat-divider>
        <mat-list>
          <mat-list-item>
            <mat-icon matListIcon color="primary">phone</mat-icon>
            <h4 matLine>+1 (800) 123-4567</h4>
            <p matLine>Mon-Fri, 9AM–5PM EST</p>
          </mat-list-item>
          <mat-list-item>
            <mat-icon matListIcon color="primary">email</mat-icon>
            <h4 matLine>support&#64;healthledger.com</h4>
          </mat-list-item>
          <mat-list-item>
            <mat-icon matListIcon color="primary">book_online</mat-icon>
            <h4 matLine>Book a Demo</h4>
          </mat-list-item>
          <mat-list-item>
            <mat-icon matListIcon color="primary">insert_drive_file</mat-icon>
            <h4 matLine>Developer Docs</h4>
          </mat-list-item>
        </mat-list>
        <p><strong>Business Hours:</strong> Mon–Fri 9AM–5PM EST</p>
        <p>Weekend support for emergencies only</p>
      </mat-card>
    </div>
  </div>

  <!-- Support Ticket Form -->
  <div class="support-ticket">
    <mat-card id="support-form">
      <h3><mat-icon color="primary">contact_support</mat-icon> Submit a Support Ticket</h3>
      <mat-divider></mat-divider>
      <form (ngSubmit)="submitTicket()">

        
        <mat-form-field class="full-width">
          <mat-label>Your Name</mat-label>
          <input matInput [(ngModel)]="supportForm.name" name="name" required />
          <mat-error *ngIf="errors.name">{{ errors.name }}</mat-error>
        </mat-form-field>
  
        <mat-form-field class="full-width">
          <mat-label>Email</mat-label>
          <input matInput type="email" [(ngModel)]="supportForm.email" name="email" required />
          <mat-error *ngIf="errors.email">{{ errors.email }}</mat-error>
        </mat-form-field>
  
        <mat-form-field class="full-width">
          <mat-label>Subject</mat-label>
          <input matInput [(ngModel)]="supportForm.subject" name="subject" required />
          <mat-error *ngIf="errors.subject">{{ errors.subject }}</mat-error>
        </mat-form-field>
  
        <mat-form-field class="full-width">
          <mat-label>Category</mat-label>
          <mat-select [(ngModel)]="supportForm.category" name="category" required>
            <mat-option value="account">Account Issues</mat-option>
            <mat-option value="technical">Technical Problems</mat-option>
            <mat-option value="billing">Billing Inquiries</mat-option>
            <mat-option value="feature">Feature Requests</mat-option>
            <mat-option value="other">Other</mat-option>
          </mat-select>
          <mat-error *ngIf="errors.category">{{ errors.category }}</mat-error>
        </mat-form-field>
  
        <mat-form-field class="full-width">
          <mat-label>Message</mat-label>
          <textarea matInput rows="4" [(ngModel)]="supportForm.message" name="message" required></textarea>
          <mat-error *ngIf="errors.message">{{ errors.message }}</mat-error>
        </mat-form-field>
  
        
  
        <div class="submit-btn">
          <button mat-raised-button color="primary" type="submit" [disabled]="loading" >
            <mat-progress-spinner *ngIf="loading" diameter="20" mode="indeterminate"></mat-progress-spinner>
            {{ loading ? 'Submitting...' : 'Submit Ticket' }}
          </button>
        </div>
      </form>
    </mat-card>
  </div>
</section>
